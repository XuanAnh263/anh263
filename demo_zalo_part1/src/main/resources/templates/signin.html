<!DOCTYPE html>
<html lang="en">

    <!-- Head -->
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1, shrink-to-fit=no">
        <title>Đăng nhập tài khoảng Zalo</title>

        <!-- Template core CSS -->
        
        <link href="assets\css\template.min.css" rel="stylesheet">
        <link href="assets\css\template.dark.min.css" rel="stylesheet" media="(prefers-color-scheme: light)">
        
        
        
    </head>
    <!-- Head -->

    <body>

        <div class="layout">

            <div class="container d-flex flex-column">
                <div class="row align-items-center justify-content-center no-gutters min-vh-100">

                    <div class="col-12 col-md-5 col-lg-4 py-8 py-md-11">

                        <!-- Heading -->
                        <h1 class="font-bold text-center">WAVE</h1>

                        <!-- Text -->
                        <p class="text-center mb-6">Đăng nhập tài khoản WAVE
                            <br> để kết nối với ứng dụng WAVE
                        </p>

                        <!-- Form -->
                        <form class="mb-6">
                            <!-- Email -->
                            <div class="form-group">
                                <label for="email" class="sr-only">Email</label>
                                <input type="email" class="form-control form-control-lg log-in-email" id="email" placeholder="Enter your email">
                            </div>

                            <!-- Password -->
                            <div class="form-group">
                                <label for="password" class="sr-only">Password</label>
                                <input type="password" class="form-control form-control-lg log-in-password" id="password" placeholder="Enter your password">
                            </div>

                            <div class="form-group d-flex justify-content-between">
                                <div class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" checked="" id="checkbox-remember">
                                    <label class="custom-control-label" for="checkbox-remember">Remember me</label>
                                </div>
                                <a href="password-reset.html">Reset password</a>
                            </div>

                            <!-- Submit -->
                            <button  class="btn btn-lg log-in-btn btn-block btn-primary" type="button">Sign in</button>
                        </form>

                        <!-- Text -->
                        <p class="text-center">
                            Don't have an account yet <a href="signup.html">Sign up</a>.
                        </p>

                    </div>
                </div> <!-- / .row -->
            </div>

        </div><!-- .layout -->

        <!-- Scripts -->
        <script src="assets\js\libs\jquery.min.js"></script>
        <script src="assets\js\bootstrap\bootstrap.bundle.min.js"></script>
        <script src="assets\js\plugins\plugins.bundle.js"></script>
        <script src="assets\js\template.js"></script>
        <!-- Scripts -->

    </body>

<script>
    $(document).on('click',function (e) {
        let target = e.target;
        //validate log in
        if (target.closest('.log-in-btn')) {
            let emailFormat = new RegExp(/^([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/);

            let isValid = true;
            let logInEmail = $('.log-in-email');
            let logInEmailValue = logInEmail.val();
            let logInEmailInvalid = $('.log-in-email').next();
            let logInPassword = $('.log-in-password');
            let logInPasswordValue = logInPassword.val();
            let logInPasswordInvalid = $('.log-in-password').next();

            if (logInEmailValue == "") {
                logInEmailInvalid.css('display', 'block');
                logInEmailInvalid.html('Vui lòng nhập email');
                isValid = false;
            } else if (!emailFormat.test(logInEmailValue)) {
                logInEmailInvalid.css('display', 'block');
                logInEmailInvalid.html('Email không hợp lệ');
                isValid = false;
            }
            if (logInPasswordValue.length < 6 || logInPasswordValue.length > 20) {
                logInPasswordInvalid.css('display', 'block');
                logInPasswordInvalid.html('Độ dài mật khẩu từ 6 - 20 ký tự')
                isValid = false;
            }

            if (isValid == true) {
                req = {
                    email: logInEmailValue,
                    password: logInPasswordValue

                }
            $.ajax({
                url: "/api/v1/authentication/login",
                type: "POST",
                data: JSON.stringify(req),
                contentType: "application/json; charset=utf-8",
                success: function(data) {
                    alert("thanh cong");



                    window.location.href = 'http://localhost:8080/index';

                },
                error: function(data) {
                    alert("ko thanh cong")

                },
            })

        }

        }
    })


</script>
</html>